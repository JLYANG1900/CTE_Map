<!-- ËßÜÂõæÂàáÊç¢ÂÆπÂô® -->
<div id="cte-view-map" class="cte-view active">
    <div class="cte-wrapper">
        <h1>Jinggang City Map</h1>
        <h2>ARCHIVE ACCESS LEVEL: AUTHORIZED</h2>

        <div class="controls-bar">
            <button class="cte-btn" onclick="window.CTEMap.switchView('national-map')">üó∫Ô∏è National Strategy Map</button>
            <span style="border-right: 1px solid #ccc; margin: 0 10px; height: 15px;"></span>
            <span style="font-family: 'Inter', sans-serif;">Map Source:</span>
            <button class="cte-btn" onclick="document.getElementById('bg-upload').click()">üìÇ Upload File...</button>
            <input type="file" id="bg-upload" accept="image/*" style="display:none;" onchange="window.CTEMap.changeBackground(this)">
        </div>

        <div class="map-container" id="cte-map-container">
            <div class="location" id="gov" style="top: 60%; left: 50%;" data-popup="gov-popup"><span class="label">City Hall</span></div>
            <div class="location" id="villa" style="top: 15%; left: 25%;" data-popup="villa-popup"><span class="label">Private Villa</span></div>
            <div class="location" id="dorm" style="top: 15%; left: 50%;" data-popup="dorm-popup"><span class="label">CTE Dorms</span></div>
            <div class="location" id="PrivateClub" style="top: 15%; left: 75%;" data-popup="PrivateClub-popup"><span class="label">Private Club</span></div>
            <div class="location" id="airport" style="top: 35%; left: 85%;" data-popup="airport-popup"><span class="label">Airport</span></div>
            <div class="location" id="port" style="top: 65%; left: 85%;" data-popup="port-popup"><span class="label">Port</span></div>
            <div class="location" id="office4" style="top: 25%; left: 15%;" data-popup="office4-popup"><span class="label">Longsang Group</span></div>
            <div class="location" id="office3" style="top: 35%; left: 10%;" data-popup="office3-popup"><span class="label">Shenghua Group</span></div>
            <div class="location" id="office" style="top: 60%; left: 15%;" data-popup="office-popup"><span class="label">Yuanyang Group</span></div>
            <div class="location" id="TVstation" style="top: 65%; left: 20%;" data-popup="TVstation-popup"><span class="label">TV Station</span></div>
            <div class="location" id="office2" style="top: 70%; left: 15%;" data-popup="office2-popup"><span class="label">Wancheng Ent.</span></div>
            <div class="location" id="highschool" style="top: 85%; left: 30%;" data-popup="highschool-popup"><span class="label">High School</span></div>
            <div class="location" id="other-places" style="top: 85%; left: 85%;" data-popup="other-places-popup"><span class="label">Other</span></div>
        </div>
    </div>
</div>

<!-- ÂõΩÂÆ∂Âú∞ÂõæËßÜÂõæ -->
<div id="cte-view-national-map" class="cte-view">
    <div class="cte-wrapper" style="width: 95%;">
        <h1>National Strategy Map</h1>
        <p style="font-family: 'Inter', sans-serif; color: #888; margin-top: 0px; font-size: 12px; letter-spacing: 1px;">CONFIDENTIAL STRATEGIC INTELLIGENCE</p>
        
        <div class="controls-bar" style="justify-content: center;">
             <button class="cte-btn" onclick="window.CTEMap.switchView('map')">‚Ü©Ô∏è Return to City</button>
        </div>

        <div class="national-map-container" id="national-game-map">
            <!-- ÂüéÂ∏ÇÂ∞ÜÁî± JS Ê≥®ÂÖ• -->
        </div>

        <div class="national-info-panel">
            <div id="national-info-content">
                <h2><i class="fa-solid fa-folder-open"></i> Intelligence Briefing</h2>
                <p>Select a region on the map to access detailed reports.</p>
            </div>
        </div>
    </div>
</div>

<!-- Ë°åÁ®ãË°®ËßÜÂõæ -->
<div id="cte-view-schedule" class="cte-view">
    <div class="cte-wrapper">
        <h1>Daily Itinerary</h1>
        <h2 id="cte-schedule-status">Synchronizing...</h2>
        
        <div class="controls-bar">
            <button class="cte-btn" onclick="window.CTEMap.refreshSchedule()">üîÑ Refresh Status</button>
        </div>

        <div id="cte-timeline-container" class="cte-timeline-container">
            <p style="text-align:center; color:#888; margin-top:50px; font-family: 'Inter', sans-serif;">No active schedule data found in archive.</p>
        </div>
    </div>
</div>

<!-- ÂÅ∂ÂÉè‰∫ãÂä°ÊâÄ RPG ÁÆ°ÁêÜÁªàÁ´ØËßÜÂõæ -->
<div id="cte-view-manager" class="cte-view">
    <div class="cte-rpg-container">
        <!-- ‰æßËæπÊ†è -->
        <div class="cte-rpg-sidebar">
            <div class="cte-rpg-logo"><span>M</span></div>
            <button class="cte-rpg-nav-btn active" data-subview="dashboard" title="Dashboard"><i class="fa-solid fa-chart-pie"></i></button>
            <button class="cte-rpg-nav-btn" data-subview="roster" title="Personnel"><i class="fa-solid fa-users"></i></button>
            <button class="cte-rpg-nav-btn" data-subview="agency" title="Operations"><i class="fa-solid fa-building"></i></button>
        </div>
        
        <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
        <div class="cte-rpg-main">
            <!-- È°∂ÈÉ® HUD -->
            <div class="cte-rpg-hud">
                <div style="font-family:'Playfair Display',serif; font-weight:bold; color:#1a1a1a; letter-spacing:1px;">EXECUTIVE SUMMARY</div>
                <div class="cte-rpg-res-group">
                    <div class="cte-rpg-res-item">
                        <div class="cte-rpg-res-icon"><i class="fa-solid fa-coins"></i></div>
                        <div><span class="cte-rpg-res-val" id="rpg-val-funds">...</span><span class="cte-rpg-res-label">Assets</span></div>
                    </div>
                    <div class="cte-rpg-res-item">
                        <div class="cte-rpg-res-icon"><i class="fa-solid fa-heart"></i></div>
                        <div><span class="cte-rpg-res-val" id="rpg-val-fans">...</span><span class="cte-rpg-res-label">Influence</span></div>
                    </div>
                    <div class="cte-rpg-res-item">
                        <div class="cte-rpg-res-icon"><i class="fa-solid fa-fire"></i></div>
                        <div><span class="cte-rpg-res-val" id="rpg-val-morale">...</span><span class="cte-rpg-res-label">Morale</span></div>
                    </div>
                </div>
            </div>

            <!-- RPG Â≠êËßÜÂõæÂÜÖÂÆπÂÆπÂô® -->
            <div id="cte-rpg-content-area" style="flex:1; padding: 25px; overflow-y: auto;">
                <div style="color: #666; font-family:'Inter';">Initializing Neural Interface...</div>
            </div>
        </div>
    </div>
</div>

<!-- Heartbeat ‰∫≤ÂØÜ‰∫íÂä®ËßÜÂõæ -->
<div id="cte-view-heartbeat" class="cte-view">
    <div class="cte-hb-container">
        <div class="cte-hb-header">
            <h1>Personal Journal</h1>
            <p>Private interactions & special events log</p>
        </div>
        <div class="cte-hb-content">
            <div class="cte-hb-grid" id="cte-hb-activity-grid">
                <!-- JS Generated Activities -->
            </div>
        </div>
    </div>
</div>

<!-- ÈÅÆÁΩ©Â±Ç -->
<div class="popup-overlay" id="cte-overlay" onclick="window.CTEMap.closeAllPopups()"></div>

<!-- Âá∫Ë°åËèúÂçï -->
<div id="travel-menu-overlay" onclick="if(event.target === this) window.CTEMap.closeTravelMenu()">
    <div class="travel-menu-box">
        <span class="close-btn" onclick="window.CTEMap.closeTravelMenu()">&times;</span>
        <div id="travel-title">Travel Requisition</div>
        <div id="travel-content" class="travel-options"></div>
    </div>
</div>

<!-- ÂèÇ‰∏éËÄÖÈÄâÊã©ÂºπÁ™ó -->
<div id="cte-participant-popup" class="cte-popup" style="max-width: 400px;">
    <span class="close-btn" onclick="window.CTEMap.closeAllPopups()">&times;</span>
    <h3>Personnel Selection</h3>
    <p style="font-size:12px; margin-bottom:10px;">Select members for this operation:</p>
    
    <div id="cte-participant-list" class="participant-grid">
        <!-- JS Âä®ÊÄÅÁîüÊàêÂ§çÈÄâÊ°Ü -->
    </div>
    
    <div style="margin-top:15px; border-top:1px dashed #ccc; padding-top:10px;">
        <p style="font-size:12px; color:#666; margin-bottom:5px;">Add. Personnel (Optional):</p>
        <input type="text" id="participant-custom" class="travel-input" placeholder="Name..." style="width:90%;">
    </div>

    <div style="text-align:center; margin-top:15px; display:flex; gap:10px; justify-content:center;">
        <button class="cte-btn" onclick="window.CTEMap.proceedToLocationSelection()">Confirm Selection</button>
        <button class="cte-btn" onclick="window.CTEMap.closeAllPopups()" style="color:#666; border-color:#ccc;">Cancel</button>
    </div>
</div>

<!-- Heartbeat ‰∏ìÂ±ûÂ§öÈÄâÂºπÁ™ó -->
<div id="cte-hb-modal" class="cte-hb-modal">
    <div class="cte-hb-modal-content">
        <h2 id="cte-hb-modal-title" style="margin: 0 0 10px 0; font-family: 'Playfair Display'; border-bottom: 2px solid #a84444; display:inline-block;">Member Select</h2>
        <p style="color: #666; font-size: 0.9rem; margin-top: 10px;">Choose members for this private event:</p>
        <div class="cte-hb-member-list" id="cte-hb-member-list">
            <!-- JS Generated Members -->
        </div>
        <div style="margin-top: 20px; display: flex; justify-content: center; gap: 10px;">
            <button class="cte-hb-assign-button" id="cte-hb-confirm-btn" onclick="window.CTEMap.Heartbeat.confirmAssignment()">Confirm</button>
            <button class="cte-hb-close-button" onclick="window.CTEMap.Heartbeat.closeModal()">Cancel</button>
        </div>
    </div>
</div>

<!-- Ëá™ÂÆö‰πâÂú∞ÁÇπÂºπÁ™ó -->
<div id="other-places-popup" class="cte-popup">
    <span class="close-btn" onclick="window.CTEMap.closeAllPopups()">&times;</span>
    <h3>Custom Destination</h3>
    <p>Specify unlisted coordinates:</p>
    <div style="text-align: center;">
        <input type="text" id="custom-destination-input" class="travel-input" style="width: 90%; margin-top:10px;" placeholder="e.g. Seaside Park">
        <button class="cte-btn" onclick="window.CTEMap.goToCustomDestination()">Proceed</button>
    </div>
</div>

<!-- ÂÆøËàçÂºπÁ™ó -->
<div id="dorm-popup" class="cte-popup">
    <span class="close-btn" onclick="window.CTEMap.closeAllPopups()">&times;</span>
    <h3>CTE Residence</h3>
    <p>High-security private dormitory complex located in the North District.</p>
    <img src="https://files.catbox.moe/qn281x.JPG" class="popup-image">
    <div style="text-align: center;">
        <button class="cte-btn" onclick="window.CTEMap.showPopup('dorm-detail-popup')">View Interior</button>
        <button class="cte-btn" onclick="window.CTEMap.openTravelMenu('CTEÁî∑Âõ¢ÂÆøËàç')">Go Here</button>
    </div>
</div>

<!-- ÂÆøËàçËØ¶ÊÉÖ -->
<div id="dorm-detail-popup" class="cte-popup">
    <span class="close-btn" onclick="window.CTEMap.closeAllPopups()">&times;</span>
    <h3>Residence Blueprint</h3>
    <div class="interior-container">
        <img src="https://files.catbox.moe/40ygiw.JPG" class="interior-image">
        <div class="floor-nav">
            <button class="floor-btn" onclick="window.CTEMap.openRooftopMenu()">1. Rooftop Garden</button>
            <button class="floor-btn" onclick="window.CTEMap.openSubMenu('‰∫îÊ•ºÔºöÁßÅ‰∫∫ÂÆøËàçÂå∫', ['Áß¶Ëø∞', 'Âè∏Ê¥õ', 'ÈπøË®Ä', 'È≠èÊòüÊ≥Ω', 'Âë®Èî¶ÂÆÅ', 'Ë∞åÁª™', 'Â≠üÊòéËµ´', '‰∫ìË∞¢', 'È≠èÊúàÂçé', 'Ê°ëÊ¥õÂá°', '‰Ω†', 'ÂÖ¨ÂÖ±‰π¶Êàø/ÈòÖËßàÂå∫'])">2. Level 5: Private Quarters</button>
            <button class="floor-btn" onclick="window.CTEMap.openSubMenu('ÂõõÊ•ºÔºöÂÅ•Â∫∑‰∏éÊÅ¢Â§çÂå∫', ['ÂÅ•Ë∫´Êàø', 'Áëú‰ºΩ‰∏éÂÜ•ÊÉ≥ÂÆ§', 'Ê∞¥Áñó‰∏éÊåâÊë©ÂÆ§', 'ÂÅ•Â∫∑ÁÆ°ÁêÜÂÆ§'])">3. Level 4: Wellness</button>
            <button class="floor-btn" onclick="window.CTEMap.openSubMenu('‰∏âÊ•ºÔºö‰∏ì‰∏öÁªÉ‰π†Âå∫', ['‰∏ªËàûËπàÂÆ§', 'Â£∞‰πêÂΩïÈü≥Ê£ö', 'ÈÄ†Âûã‰∏éË°£Â∏ΩÈó¥', 'ÊàêÂëò‰ºëÊÅØÂÆ§', '‰ºöËÆÆÂÆ§'])">4. Level 3: Training</button>
            <button class="floor-btn" onclick="window.CTEMap.openSubMenu('‰∫åÊ•ºÔºö‰∏™‰∫∫Âàõ‰Ωú‰∏éÂ®±‰πêÂå∫', ['Âë®Èî¶ÂÆÅ‰∏™‰∫∫Â∑•‰ΩúÂÆ§', 'Â≠üÊòéËµ´‰∏™‰∫∫Â∑•‰ΩúÂÆ§', '‰πêÂô®ÁªÉ‰π†ÂÆ§', 'Ê∏∏ÊàèÂ®±‰πêÂÆ§', 'ÁßÅ‰∫∫‰ºöÂÆ¢ÂéÖ', 'Êî∂ËóèÂÆ§'])">5. Level 2: Creative/Leisure</button>
            <button class="floor-btn" onclick="window.CTEMap.openSubMenu('‰∏ÄÊ•ºÔºöÁîüÊ¥ª‰∏é‰ºëÈó≤Âå∫', ['ÂâçÈô¢‰∏éÁéÑÂÖ≥', 'ÂÆ¢ÂéÖ/ÂÖ¨ÂÖ±‰ºëÊÅØÂå∫', 'ÂºÄÊîæÂºèÂé®Êàø‰∏éÈ§êÂéÖ', 'ÂÇ®ËóèÂÆ§‰∏éÊ¥óË°£Êàø', 'ÂêéÈô¢‰∏éÈú≤Â§©Ê≥≥Ê±†'])">6. Level 1: Common Areas</button>
        </div>
        <div id="interior-sub-menu" class="sub-menu-overlay">
            <div id="sub-menu-title" style="color:#a84444; font-family:'Playfair Display'; font-size:20px; margin-bottom:20px;"></div>
            <div id="sub-menu-content" class="sub-menu-grid"></div>
            <div class="sub-menu-close" style="margin-top:20px; cursor:pointer; color:#666;" onclick="window.CTEMap.closeSubMenu()">[ Close File ]</div>
        </div>
    </div>
</div>

<!-- Other Popups - Simplified for new styling -->
<div id="office-popup" class="cte-popup"><span class="close-btn" onclick="window.CTEMap.closeAllPopups()">&times;</span><h3>Yuanyang Group</h3><p>Family conglomerate.</p><div style="text-align:center"><button class="cte-btn" onclick="window.CTEMap.openTravelMenu('ËøúÊ¥ãÈõÜÂõ¢')">Go Here</button></div></div>
<div id="villa-popup" class="cte-popup"><span class="close-btn" onclick="window.CTEMap.closeAllPopups()">&times;</span><h3>Private Villa</h3><p>Your personal residence.</p><div style="text-align:center"><button class="cte-btn" onclick="window.CTEMap.openTravelMenu('ÁßÅ‰∫∫Âà´Â¢Ö')">Go Here</button></div></div>
<div id="office2-popup" class="cte-popup"><span class="close-btn" onclick="window.CTEMap.closeAllPopups()">&times;</span><h3>Wancheng Ent.</h3><p>Major entertainment group.</p><div style="text-align:center"><button class="cte-btn" onclick="window.CTEMap.openTravelMenu('‰∏áÂüéÂ®±‰πê')">Go Here</button></div></div>
<div id="office3-popup" class="cte-popup"><span class="close-btn" onclick="window.CTEMap.closeAllPopups()">&times;</span><h3>Shenghua Group</h3><p>Legacy industrial group.</p><div style="text-align:center"><button class="cte-btn" onclick="window.CTEMap.openTravelMenu('ÁõõÂçéÈõÜÂõ¢')">Go Here</button></div></div>
<div id="office4-popup" class="cte-popup"><span class="close-btn" onclick="window.CTEMap.closeAllPopups()">&times;</span><h3>Longsang Group</h3><p>Tech giant.</p><div style="text-align:center"><button class="cte-btn" onclick="window.CTEMap.openTravelMenu('ÈöÜÊ°ëÈõÜÂõ¢')">Go Here</button></div></div>
<div id="highschool-popup" class="cte-popup"><span class="close-btn" onclick="window.CTEMap.closeAllPopups()">&times;</span><h3>High School</h3><p>No.3 High School.</p><div style="text-align:center"><button class="cte-btn" onclick="window.CTEMap.openTravelMenu('‰∫¨Ê∏ØÁ¨¨‰∏âÈ´ò‰∏≠')">Go Here</button></div></div>
<div id="gov-popup" class="cte-popup"><span class="close-btn" onclick="window.CTEMap.closeAllPopups()">&times;</span><h3>City Hall</h3><p>Administrative center.</p><div style="text-align:center"><button class="cte-btn" onclick="window.CTEMap.openTravelMenu('‰∫¨Ê∏ØÂ∏ÇÊîøÂ∫ú')">Go Here</button></div></div>
<div id="PrivateClub-popup" class="cte-popup"><span class="close-btn" onclick="window.CTEMap.closeAllPopups()">&times;</span><h3>Private Club</h3><p>Members only.</p><div style="text-align:center"><button class="cte-btn" onclick="window.CTEMap.openTravelMenu('ÁßÅ‰∫∫‰ºöÊâÄ')">Go Here</button></div></div>
<div id="TVstation-popup" class="cte-popup"><span class="close-btn" onclick="window.CTEMap.closeAllPopups()">&times;</span><h3>TV Station</h3><p>Media center.</p><div style="text-align:center"><button class="cte-btn" onclick="window.CTEMap.openTravelMenu('‰∫¨Ê∏ØÁîµËßÜÂè∞')">Go Here</button></div></div>
<div id="airport-popup" class="cte-popup"><span class="close-btn" onclick="window.CTEMap.closeAllPopups()">&times;</span><h3>Airport</h3><p>Transport hub.</p><div style="text-align:center"><button class="cte-btn" onclick="window.CTEMap.openTravelMenu('Êú∫Âú∫')">Go Here</button></div></div>
<div id="port-popup" class="cte-popup"><span class="close-btn" onclick="window.CTEMap.closeAllPopups()">&times;</span><h3>Port</h3><p>International freight port.</p><div style="text-align:center"><button class="cte-btn" onclick="window.CTEMap.openTravelMenu('Ê∏ØÂè£')">Go Here</button></div></div>
